<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>New reminder</title>
      <link rel="stylesheet" type="text/css" href="./api/global.css">
      <link href="https://fonts.googleapis.com/css2?family=Faster+One&family=Thasadith&display=swap" rel="stylesheet">
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
         </head>
   <body>
      <form action="/schedule" method="POST" name="reminderSubmit" onsubmit="return validateForm()">
         <div class="reminder-container">
            <label for="item_1">Remind about..</label>
            <input type="text" placeholder="Remind about.." name="item_1" id="item_1" required>   
            <label for="item_2">Remind about..</label>
            <input type="text" placeholder="Remind about.." name="item_2" id="item_2">  
            <label for="item_3">Remind about..</label>
            <input type="text" placeholder="Remind about.." name="item_3" id="item_3">  
            <label for="item_4">Remind about..</label>
            <input type="text" placeholder="Remind about.." name="item_4" id="item_4">  
            <label for="item_5">Remind about..</label>
            <input type="text" placeholder="Remind about.." name="item_5" id="item_5">  
            <label for="created_by">Your SC initials:</label>
            <input type="text" placeholder="Your SC initials:" name="created_by" id="created_by" required>
            <label for="send_at">Schedule to be send at:</label>
            <input type="datetime-local" placeholder="Schedule to be send at:" name="send_at" id="send_at" required>
            <button class="btn btn-primary" type="submit" id="submit">Submit</button>
            <button class="btn btn-primary" id="cancel" onclick="window.location.href='/home'">Cancel</button>
         </div>
      </form>
      <script>

function validateForm() {
    const item_1 = document.forms.reminderSubmit.item_1.value;
    const item_2 = document.forms.reminderSubmit.item_2.value;
    const item_3 = document.forms.reminderSubmit.item_3.value;
    const item_4 = document.forms.reminderSubmit.item_4.value;
    const item_5 = document.forms.reminderSubmit.item_5.value;
    const created_by = document.forms.reminderSubmit.created_by.value;
    const send_at = document.forms.reminderSubmit.send_at.value;

    const numericReg = /^\+?\d*$/;

    if (item_1.length < 4 && item_2.length < 4 && item_3.length < 4 && item_4.length < 4 && item_5.length < 4) {
        sweetAlert("Please be more specific");
        return false;
    }

    if (numericReg.test(created_by)) {
        sweetAlert("Please enter alphabetic characters only for the initials");
        return false;
    }

    return true;
    
}

$("#submit").click(function() {
         
    var item_1 = $("#item_1").val();
    // var item_2 = $("#item_2").val(); 
    // var item_3 = $("#item_3").val();
    // var item_4 = $("#item_4").val();
    // var item_5 = $("#item_5").val();
    // var item_6 = $("#item_6").val();
    var send_at = $("#send_at").val();
    var created_by = $("#created_by").val();

   var delay = 4000; 
   var url = 'http://localhost:5005/home';
   setTimeout(function(){ window.location = url; }, delay);
    
    if ( item_1 == '' || send_at == '' || created_by == '' ) {
    
       swal({
          title: "Fields empty",
          text: "Please fill the missing fields",
          icon: "warning",
          button: "OK"
       });
    } else {
       
       swal({
          title: "Reminder created succesfully",
          text: "You will now be redirected to the main page",
          icon: "success",
          button: "OK",
       });
    }
});


//  swal({
//     title: "Are you sure?",
//     text: "Once deleted, you will not be able to recover this imaginary file!",
//     icon: "warning",
//     buttons: true,
//     dangerMode: true,
//   })
//   .then((willDelete) => {
//     if (willDelete) {
//       swal("Poof! Your imaginary file has been deleted!", {
//         icon: "success",
//       });
//     } else {
//       swal("Your imaginary file is safe!");
//     }
//   });

      </script>
   </body>
</html>