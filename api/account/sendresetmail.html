<title>Send reset email</title>
</head>

<body>
    <form action="/resetpassword" method="POST" name="usernameSubmit" onsubmit="return validateForm()">
        <div class="form-row align-items-center" id="user-input-center">
            <label for="username">Username</label>
            <input type="text" placeholder="Enter Username" name="username" required>
            <input type="hidden" placeholder="Enter email" name="email" required>
            <button type="submit" id="submit">Send mail</button>
            <button class="btn btn-primary" id="cancel" onclick="window.location.href='/home'">Cancel</button>
        </div>
    </form>
    <script>
        function validateForm() {
            const username = document.forms.usernameSubmit.username.value;
            const email = 'anna.maria.wilczek @gmail.com'; //username.concat('@simcorp.com');

            if (username.length < 2 || username.length > 4) {
                Swal.fire('Please provide correct SC initials');
                return false;
            }

            return true;

        }

        $('#submit').click(function() {

            var username = $('#username').val();

            if (username == '') {

                Swal.fire({
                    title: 'Username empty',
                    text: 'Please fill the missing field',
                    icon: 'warning',
                    button: 'OK'
                });

            } else {
                Swal.fire({
                    title: 'Please check your e-mail',
                    text: 'Link with password reset has been sent',
                    icon: 'success',
                    confirmButtonText: 'OK'
                }).then(function(result) {
                    if (result.value) {
                        location.assign('http://localhost:5005/login')
                    }
                });
            }
        });
    </script>